# 开发工作流程

## 日常开发流程

### 1. 环境准备
```bash
# 启动后端服务器
cd python/sight_server
uvicorn main:app --reload

# 启动前端开发服务器
cd m_WGP_vue3
npm run dev
```

### 2. 功能开发
- 根据需求修改后端API或前端组件
- 遵循代码风格约定
- 添加适当的测试

### 3. 测试验证
- 运行相关测试文件
- 手动测试功能
- 验证集成功能

### 4. 代码质量检查
- 运行代码格式化
- 运行代码检查
- 修复发现的问题

## 项目特定工作流

### AI组件开发
1. **修改Agent逻辑**
   - 更新 `core/agent.py`
   - 修改LangGraph工作流
   - 测试意图分析

2. **缓存策略调整**
   - 更新 `services/query_cache_manager.py`
   - 测试缓存命中率
   - 验证语义相似性

3. **数据库查询优化**
   - 修改SQL生成逻辑
   - 测试空间查询
   - 验证PostGIS功能

### 前端地图开发
1. **地图组件修改**
   - 更新OpenLayers组件
   - 测试地图交互
   - 验证数据可视化

2. **UI/UX改进**
   - 修改Vue组件
   - 测试用户交互
   - 验证响应式设计

## 调试和故障排除

### 常见调试步骤
1. **检查日志**
   - 查看后端日志输出
   - 检查前端控制台错误
   - 验证API响应

2. **数据库调试**
   - 测试数据库连接
   - 验证SQL查询
   - 检查PostGIS扩展

3. **AI组件调试**
   - 检查LLM API响应
   - 验证LangGraph状态
   - 测试记忆机制

### 性能优化
1. **查询优化**
   - 分析慢查询
   - 优化SQL语句
   - 测试缓存效果

2. **前端性能**
   - 检查包大小
   - 优化地图渲染
   - 测试加载时间

## 部署流程

### 开发环境部署
1. 确保所有依赖已安装
2. 启动后端和前端服务器
3. 验证功能正常

### 生产环境准备
1. 构建前端：`npm run build`
2. 配置生产环境变量
3. 测试生产API

## 版本控制

### Git工作流
1. **功能分支**
   - 从main分支创建功能分支
   - 开发完成后提交PR
   - 代码审查后合并

2. **提交规范**
   - 使用描述性提交信息
   - 关联相关issue
   - 包含测试和文档更新

### 发布管理
1. **版本标记**
   - 使用语义化版本号
   - 更新CHANGELOG
   - 创建发布标签

## 协作指南

### 代码审查
- 检查代码是否符合约定
- 验证功能完整性
- 确保测试覆盖

### 文档更新
- 更新相关文档
- 添加API文档
- 维护项目说明